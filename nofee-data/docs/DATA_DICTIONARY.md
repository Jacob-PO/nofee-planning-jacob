# 노피 데이터 사전 (Data Dictionary)

**작성일**: 2025-11-19
**목적**: 노피 서비스 전반의 용어 및 코드 정의

---

## 📋 목차

1. [비즈니스 용어](#비즈니스-용어)
2. [Step Code (진행 상태)](#step-code-진행-상태)
3. [통신사 Code](#통신사-code)
4. [가입 유형 Code](#가입-유형-code)
5. [지원 유형 Code](#지원-유형-code)
6. [상품 상태 Code](#상품-상태-code)
7. [판매점 상태 Code](#판매점-상태-code)
8. [기타 용어](#기타-용어)

---

## 비즈니스 용어

### 서비스 버전

| 용어 | 정의 | 기간 |
|------|------|------|
| **버전 1: 일반견적** | 노피가 전국 평균 가격을 제시하고 지역 기반으로 판매점 매칭 | 2025-07 ~ 2025-08 |
| **버전 2: 캠페인 견적 (동네성지 v1)** | 판매점이 직접 상품 업로드, 고객이 선택 (검색 기능 없음) | 2025-07 ~ 2025-08 |
| **버전 3: 동네 견적 (동네성지 v2)** | 검색 기능 추가, 판매점 어드민 개선, 일반견적 제거 | 2025-09 ~ 현재 |

### 핵심 프로세스

#### 견적 신청 (Apply)
- **정의**: 고객이 휴대폰 개통을 위해 노피에 제출하는 신청서
- **테이블**: `tb_apply_phone`, `tb_apply_campaign_phone`
- **프로세스**: 신청 → 매장 매칭 → 매장 구매 → 개통 완료

#### 매장 구매 (Store Purchase)
- **정의**: 판매점이 고객 DB를 구매 확정한 상태
- **테이블**: `tb_store_purchase`
- **의미**: 판매점이 해당 고객과 연락하여 개통 진행 예정

#### 개통 완료 (Completion)
- **정의**: 고객이 실제로 휴대폰을 개통한 상태
- **조건**: `step_code = '0201005'`
- **측정**: 개통율 = 개통 완료 / 총 신청

#### 동네성지
- **정의**: 판매점이 직접 상품과 가격을 등록하여 고객에게 노출하는 기능
- **특징**: 지역 기반 판매점 검색, 실시간 가격 비교
- **버전**: v1 (2025-07), v2 (2025-09~)

---

## Step Code (진행 상태)

**그룹 코드**: `0201`
**테이블**: `tb_apply_phone.step_code`, `tb_apply_campaign_phone.step_code`

| Code | 상태명 | 설명 | 다음 단계 |
|------|--------|------|----------|
| `0201001` | 신청접수 | 고객이 견적 신청을 제출한 상태 | 0201002 or 0201006 |
| `0201002` | 진행중 | 매장이 DB를 구매하고 고객 연락 시작 | 0201003 or 0201006 |
| `0201003` | 대응완료 | 매장이 고객과 상담 완료 (매장선택) | 0201004 or 0201006 |
| `0201004` | 개통 진행중 | 고객 방문 예약 완료, 개통 진행 중 | 0201005 |
| `0201005` | **개통완료** | **최종 개통 성공** ✅ | - |
| `0201006` | 반려 (신청취소) | 매장 반려 또는 고객 취소 | - |
| `0201007` | 취소 (매칭실패) | 매장 매칭 실패 또는 시스템 취소 | - |

### Step Code 흐름도

```
신청접수 (0201001)
    ↓
진행중 (0201002) ← 매장 DB 구매
    ↓
대응완료 (0201003) ← 매장 상담 완료
    ↓
개통 진행중 (0201004) ← 방문 예약
    ↓
개통완료 (0201005) ← 최종 개통 ✅

언제든 → 반려 (0201006) or 취소 (0201007)
```

### Step Code 분포 (2025-11-19)

#### 일반 견적 (`tb_apply_phone`)
| Step Code | 건수 | 비율 |
|-----------|------|------|
| 0201006 (반려) | 2,860건 | 69.7% |
| 0201007 (취소) | 1,018건 | 24.8% |
| 0201003 (대응완료) | 101건 | 2.5% |
| 0201004 (개통 진행중) | 68건 | 1.7% |
| 0201005 (개통완료) | 47건 | 1.1% |

#### 캠페인 견적 (`tb_apply_campaign_phone`)
| Step Code | 건수 | 비율 |
|-----------|------|------|
| 0201006 (반려) | 3,068건 | 64.3% |
| 0201007 (취소) | 1,094건 | 22.9% |
| 0201003 (대응완료) | 240건 | 5.0% |
| 0201005 (개통완료) | 193건 | 4.0% |
| 0201004 (개통 진행중) | 168건 | 3.5% |

---

## 통신사 Code

**그룹 코드**: `0301001`
**컬럼**: `apply_carrier_code`, `completed_carrier_code`

| Code | 통신사명 | 약칭 |
|------|---------|------|
| `0301001001` | SK텔레콤 | SKT |
| `0301001002` | KT | KT |
| `0301001003` | LG유플러스 | LG |

### 알뜰폰 (MVNO)
- **현재**: 미지원
- **향후**: 확장 예정

---

## 가입 유형 Code

**그룹 코드**: `0301007`
**컬럼**: `apply_join_type_code`, `completed_join_type_code`

| Code | 가입 유형 | 설명 |
|------|----------|------|
| `0301007001` | 신규 | 새로운 번호로 가입 |
| `0301007002` | 번호이동 | 기존 번호를 다른 통신사로 이동 |
| `0301007003` | 기기변경 | 동일 통신사, 동일 번호, 기기만 교체 |

### 가입 유형별 특징

| 가입 유형 | 지원금 | 위약금 | 인기도 |
|----------|--------|--------|--------|
| 신규 | 높음 | 없음 | 중간 |
| 번호이동 | 매우 높음 | 이전 통신사 위약금 가능 | 높음 |
| 기기변경 | 낮음 | 없음 | 낮음 |

---

## 지원 유형 Code

**그룹 코드**: `0301008`
**컬럼**: `apply_support_type_code`, `completed_support_type_code`

| Code | 지원 유형 | 설명 |
|------|----------|------|
| `0301008001` | 공시지원금 | 통신사 공식 지원금 (24개월 약정) |
| `0301008002` | 선택약정 | 추가 할인 (24개월 요금제 유지) |

### 공시지원금 vs 선택약정

| 구분 | 공시지원금 | 선택약정 |
|------|-----------|----------|
| 지원금액 | 높음 | 낮음 |
| 요금제 할인 | 없음 | 25% 할인 |
| 약정 기간 | 24개월 | 24개월 |
| 중도 해지 시 | 위약금 | 할인 철회 |

---

## 상품 상태 Code

**그룹 코드**: `0204`
**테이블**: `tb_product_group_phone.state_code`

| Code | 상태 | 설명 |
|------|------|------|
| `0204001` | 출시 예정 | 사전예약 가능 |
| `0204002` | **활성** | **현재 판매 중** |
| `0204003` | 단종 | 판매 중단 |

### 상품 상태 분포
- 활성 상품: 75개
- 실제 가격표 연결 상품: 26개 기종

---

## 판매점 상태 Code

**그룹 코드**: `0202`
**테이블**: `tb_store.step_code`

| Code | 상태 | 설명 |
|------|------|------|
| `0202001` | 신청 | 판매점 등록 신청 |
| `0202002` | 검토중 | 노피 승인 검토 중 |
| `0202003` | **승인완료** | **정식 파트너 판매점** |
| `0202004` | 반려 | 승인 거부 |

### 동네성지 활성 판매점 조건
```sql
WHERE step_code = '0202003'
  AND pricetable_exposure_yn = 'Y'
  AND deleted_yn = 'N'
```

**현재**: 11개 활성 판매점

---

## 기타 용어

### 할부원금 (Installment Principal)

**컬럼**: `installment_principal`, `apply_installment_principal`

- **정의**: 기기값을 24개월로 나눈 월 할부금
- **계산**: (출고가 - 공시지원금) / 24개월
- **음수**: 공짜폰 (지원금 > 출고가)

**예시**:
```
출고가: 1,200,000원
공시지원금: 600,000원
할부원금: (1,200,000 - 600,000) / 24 = 25,000원/월

공짜폰 예시:
출고가: 800,000원
공시지원금: 1,000,000원
할부원금: (800,000 - 1,000,000) / 24 = -8,333원/월
```

### 월 납부액 (Monthly Payment)

**컬럼**: `apply_month_price`, `completed_month_price`

- **계산**: 할부원금 + 요금제
- **예시**: 25,000원 (할부) + 50,000원 (요금제) = 75,000원/월

### 출고가 (Retail Price)

**컬럼**: `retail_price`, `apply_retail_price`

- **정의**: 제조사가 정한 정식 판매 가격
- **예시**: 아이폰 17 프로 256GB - 1,550,000원

### 저장 용량 (Storage)

**그룹 코드**: `0305`

| Code | 용량 |
|------|------|
| 0305001 | 64GB |
| 0305002 | 128GB |
| 0305003 | 256GB |
| 0305004 | 512GB |
| 0305005 | 1TB |

### 제조사 (Manufacturer)

**그룹 코드**: `0306`

| Code | 제조사 |
|------|--------|
| 0306001 | Samsung |
| 0306002 | Apple |
| 0306003 | LG (단종) |

### 가격대 (Price Range)

**그룹 코드**: `0307`

| Code | 가격대 | 범위 |
|------|--------|------|
| 0307001 | 보급형 | ~500,000원 |
| 0307002 | 중급형 | 500,000~1,000,000원 |
| 0307003 | 프리미엄 | 1,000,000~1,500,000원 |
| 0307004 | 울트라 프리미엄 | 1,500,000원~ |

---

## 암호화 관련

### AES 암호화 컬럼

노피는 개인정보 보호를 위해 다음 컬럼을 암호화:

| 테이블 | 암호화 컬럼 |
|--------|-----------|
| `tb_user` | user_id, user_nm, user_tel_no |
| `tb_apply_*` | user_nm, apply_tel_no, completed_tel_no |
| `tb_store` | store_nm, business_no, tel_no |

### 복호화 방법 (SQL)
```sql
SELECT
    AES_DECRYPT(UNHEX(user_nm), 'SECRET_KEY') as user_name
FROM tb_user;
```

---

## 데이터 타입 규칙

### Soft Delete
- **컬럼**: `deleted_yn` (varchar(1))
- **값**: 'Y' (삭제됨), 'N' (활성)
- **원칙**: 실제 DELETE 하지 않고 플래그만 변경

### 타임스탬프
- **created_at**: 생성 일시 (NOT NULL, DEFAULT CURRENT_TIMESTAMP)
- **modified_at**: 수정 일시 (ON UPDATE CURRENT_TIMESTAMP)
- **deleted_at**: 삭제 일시 (deleted_yn='Y'일 때만 값 존재)

### Y/N 플래그
- **마케팅 동의**: `marketing_yn`
- **오픈 정보 동의**: `open_info_yn`
- **리뷰 작성 여부**: `review_yn`
- **리마인더 발송 여부**: `reminder_yn`

---

## 전환율 계산

### 신청 → 개통 전환율
```
개통 완료 건수 / 총 신청 건수 * 100
= (step_code = '0201005') / 총 신청 * 100
```

**현재**: 2.7% (전체 평균)
- 버전 1: 2.8%
- 버전 2: 0.5%
- 버전 3: 6.0% (최고 15.3%)

### 신청 → 매장 구매 전환율
```
매장 구매 건수 / 총 신청 건수 * 100
= tb_store_purchase 건수 / 총 신청 * 100
```

**현재**: 36.13%

### 매장 구매 → 개통 전환율
```
개통 완료 건수 / 매장 구매 건수 * 100
```

**현재**: 7.49%

---

## 참고 자료

- [DATABASE_SCHEMA.md](DATABASE_SCHEMA.md) - DB 스키마 상세
- [APPLICATION_FUNNEL_ANALYSIS.md](APPLICATION_FUNNEL_ANALYSIS.md) - 신청 퍼널 분석
- [SERVICE_VERSION_HISTORY.md](SERVICE_VERSION_HISTORY.md) - 서비스 버전 히스토리

---

**작성자**: Data Team
**최종 업데이트**: 2025-11-19
**버전**: 2.0
